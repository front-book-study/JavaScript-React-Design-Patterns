## chapter 05. 최신 자바스크립트 문법과 기능

>목표 : ES6 에 추가된 ES모듈과 클래스 알아보기

### 애플리케이션 분리의 중요성

어플리케이션 모듈형
- 잘게 분리된 모듈 -> 느슨한 결합으로 의존성 낮음 -> 변경의 트래킹이 쉬움 -> 유지보수 용이
- es5이전은 이런 모듈방식이 없었음. -> AMD, Commonjs 생김
- es6에서 모듈을 완전히 표준화 함 -> ES Module시대 시작

### 정적으로 모듈 가져오기

```javascript
import {cakeFactory} from "/modules/cakeFactory.mjs"

cakeFactory.oven.makeCupcake("sprinkles");
cakeFactory.oldVersion.makeMuffin("large");


```
- 실행전 모듈 먼저 다운로드 -> 초기페이지 로드시 성능 이슈 가능성

### 동적으로 모듈 가져오기

```javascript
form.addEventListener("submit", ()=>{
  import("/modules/cakeFactory.js").then((module)=> {
    module.oven.makeCupcke("sprinkels");
    moude.oven.makeMuffin("large");
    
  })
})
```
- 모듈 호출 시점에만 다운로드
- Promise 기반으로 비동기 처리

### 사용자 상호작용에 따라 가져오기

```javascript
const btn = document.querySelector("button")

btn.addEventListener("click",()=>{
  import("lodash.sortby").then(()=>module=>module.default).then(sortInput()).catch((err)=> console.log(err))
})
```
- 사용자 상호작용 시, 동적 임포트를 통해 원하는 시점에 다운로드 후 실행

### 서버에서 모듈 사용하기
- es module이 표준화되면서 node생태계에서도 15.3 버전 이상부터 es모듈 지원
- package.json 내 `type:module` 이면 `.mjs`, `.js` 를 모듈로 취급

### 모듈을 사용하면 생기는 이점
- 의존성 트리의 가장 내부에 위치한 모듈이 평가 되고 여기에 의존한 모듈이 평가 될 수 있다. (ES 모듈의 싱글톤 특성)

```
[HTML 파싱 시작]
  ↓
  ↓
< script type="module"> 발견
  ↓
[백그라운드에서 main.js 다운로드]
  ↓
main.js 내 import 탐색
    ├─ import a.js → 다운로드
    └─ import b.js → 다운로드
         └─ import c.js → 다운로드
(모듈 의존성 그래프 로딩)

  ↓
[HTML 파싱 계속 ▶ DOM 완성]
  ↓
[모듈 실행 (의존성 순서대로)]
```
- 자동으로 지연 로드 (defer는 파일마다 붙여줘야함)
- 유지보수와 재사용
- 독립된 네임스페이스를 제공
- 트리쉐이킹 가능

### 클래스

자바스립트의 클래스는 프로토타입기반 상속의 Syntactic Sugar(객체 지향의 전통적 클래스 기반 객체 지향과 다름)
생성자, 게터, 세터, private 멤버변수 `#`지원