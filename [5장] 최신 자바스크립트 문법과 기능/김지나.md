## Chapter 5. 최신 자바스크립트 문법과 기능
### 애플리케이션 분리의 중요성
모듈형 자바스크립트는 애플리케이션을 모듈이라는 단위로 쪼갤 수 있다. 애플리케이션은 여러 개의 중첩된 모듈로 구성될 수 있다.
확장 가능한 자바스크립트 생태계에서 애플리케이션이 `모듈형`이라는 것은 잘게 분리된 모듈로 구성되었음을 뜻한다. 이렇게 이루어진 느슨한 결합은 `의존성`을 낮추어 애플리케이션의 유지보수를 용이하게 만든다. 
또한모듈을 이용해 애플리케이션을 효율적으로 구현하면 어느 한 부분의 변경이 다른 부분에 어떤 영향을 미칠 수 있을지 쉽게 확인할 수 있다. 

ES5 이전의 자바스크립트는 모듈을 자연스럽게 가져오는 방법이 없었고, AMD와 CommonJS 모듈은 초기 자바스크립트에서 모듈화를 구현하기 위해 가장 많이 사용된 패턴이 되었다.

이러한 문제를 해결하기 위해 ES6 및 ES2015에서 모듈 관련 기능이 추가 되었다. 

> `.mjs`은 모듈 파일과 기존 스크립트(.js)를 구분하기 위해 쓰이는 모듈 전용 확장자이다. .mjs 확장자를 사용하여 런타임 및 빌드 도구에 모듈임을 알릴 수 있다.

#### 정적으로 모듈 가져오기 (static import)
```
import {cakeFactory} from '.'
// 미리 로드된 정적 가져오기
```
정적 가져오기는 메인 코드를 실행하기 전에 먼저 모듈을 다운로드하고 실행해야 한다. 따라서 초기 페이지 로드 시 많은 코드를 미리 로드해야 하므로 성능에 문제가 생길 수도 있다. 

#### 동적으로 모듈 가져오기 (dynamic import)
모듈을 초기에 모두 미리 로드하기보다는 필요한 시점에만 로드하는 것이 더 이로울 때가 있다. 
동적 가져오기는 함수와 비슷한 새로운 형태의 가져오기이다. import(url)은 요청된 모듈의 네임스페이스 객체에 대한 프로미스 객체를 반환한다. 이 프로미스 객체는 모듈 자체와 모든 모듈 의존성을 가져온 후 인스턴스화하고 평가한 뒤에 만들어진다.
동적 가져오기는 await와 함께 사용할 수 있다. 
```
let module = await import("/modules/cakeFactory.js");
```

### 모듈을 사용하면 생기는 이점
1. 한 번만 실행된다.
   기존 스크립트는 DOM에 추가될 때마다 실행되는 반면 모듈 스크립트는 한 번만 실행된다. 자바스크립트 모듈을 사용하면 의존성 트리의 가장 내부에 위치한 모듈이 먼저 실행된다. 
2. 자동으로 지연 로드 된다. 
   즉시 로드되지 않기 위해 다른 스크립트 파일은 defer 속성을 붙여야 하지만, 모듈은 자동으로 지연되어 로드된다.
3. 유지보수와 재사용이 쉽다
   모듈은 다른 모듈에 영향을 주지 않고 독립적으로 실행될 수 있는 코드 조각으로 관리된다.
4. 네임스페이스를 제공한다
    모듈은 관련 변수와 상수를 위한 개별 공간을 생성하여 글로벌 네임스페이스를 오염시키기 잖고 모듈 참조를 통해 사용할 수 있게 해준다. 
5. 사용하지 않는 코드를 제거한다. 
    모듈을 통해 코드를 가져오게 되면 웹팩이나 롤업같은 번들러를 사용해 사용하지 않는 모듈을 자동으로 제거할 수 있다. (트리쉐이킹)

### 생성자, 게터, 세터를 가진 클래스
ES2015+에서는 모듈뿐만 아니라 생성자와 내부를 숨기는 기능을 가진 클래스가 추가되었다. 
```
class Cake{
    constructor(name, price, topping, size){
        this.name = name;
        this.price = price;
        this.topping = topping;
        this.size = size;
    }
    
    //ES2015 이상에서는 모든 것을 함수로 만드는 것을 피하고자 새로운 식별자를 사용하려고 함
    addToping(topping){
        this.toppings.pusj(topping);
    }
    get allToppings(){
        return this.toppings
    }
    set size(size){
        ...
    }
}

```
자바스크립트의 클래스는 프로토타입을 기반으로 하고 있으며, 사용하기 전 미리 정의해야 한다.
- extends 키워드를 통해 클래스를 상속받을 수도 있다. 
- function 단어의 남용을 줄이기 위해 키워드를 붙이지않음
- super 키워드를 통해 부모 클래스의 생성자를 실행할 수있다. 자기 상속 패턴을 사용할 때 유용하다
- 최신 자바스크립트에서는 클래스 내부 멤버를 비공개로 정의할 수 있다. 사용법은 # 를 붙인다. 
- static 키워드를 통해 정적 메서드와 프로퍼티를 정의할 수 있다. 정적 멤버는 클래스를 초기화하지 않고도 사용할 수 있다. 주로 어떠한 설정이나 캐시 데이터를 보관하기 위해 사용된다. 

모듈과 클래스의 차이점은 모듈은 가져오기와 내보내기를 통해, 클래스는 class키워드를 통해 정의할 수 있다는 점이다.
