# 13. 렌더링 패턴

## 13.1 렌더링 패턴의 중요성 
TTFB
FCP
LCP
TTI
CLS
FID


## 13.2 클라이언트 사이드 렌더링(CSR)
- 큰 자바스크립트 번들로 페이지의  FCP와 TTI를 증가 시킨다. 
- 큰 요청 객체와 API 응답과 같은 일련의 네트워워크 요청으로 인해 크롤러가 색인하기전 의미있는 콘텐츠가 딜레이 될 수 있음 -> SEO에 영향을 줄 수 있음

## 13.3 서버사이드렌더링 
- SSR 은 모든 요청마다 HTML을 생성 
- js코드를 클라이언트에 전송할 필요 없음

## 13.4 정적 렌더링
- 
- HTML을 빌드 시점에 미리 생성 -> 다음 빌드때까지 변경 x

### 13.4.1 점진적 정적 생성 (ISR)

- 정적 렌더링과 SSR결합 방식 
- 특정 정적 페이지만 미리 렌더링하고 동적페이지는 사용자 요청시에 on-demand 방식으로 렌더링 
- 빌드시간 단축 , 특정시간 간격마다 캐시를 자동으로 무효화하고 페이지를 다시 생성 가능 
- ISR은 빌드 후 기존 정적 사이트에 점진적으로 업데이트를 적용하기 위해 두 가지 측면에서 작동하게 된다.


## 13.5 스트리밍 SSR

- 스트리밍 방식을 통해 TTI와 FCP 를 더욱 단축할 수 있음. 
- 가능한 이유는 html을 조각 청크로 나눠서 전송 
- renderToNodeStream  함수를 통해 리액트에서 청크로 전송가능.

## 13.10 리액트 서버 컴포넌트 
- 서버에서 실행되도록 설계된 상태를 가지지 않는 컴포넌트 
- 당연히 번들 크기 감소
- RSC의 사용여부는 프레임워크가 해당 기능을 지원하는지에 달려있음.

#### 서버 컴포넌트에서 데이터를 가져오는 방법
  - 최상위 레벨에서 await를 사용해 서버사이드 데이터 직렬화
  - 이 직렬화된 데이터(RSC Payload)를 받아서 화면에 리액트 컴포넌트로 복원(Deserialize)
  - 결과적으로 브라우저가 감수해야 할 js 번들링 크기가 줄어든다. 
  
#### RSC 프로토콜을 사용한 라우팅 기능 
  - 기존 페이지 이동시 브라우저가 GET /page 하고 HTML 파일을 요청
  - 클라이언트가 컴포넌트 트리의 일부를 요청할 수 있는 특별한 엔드 포인트를 제공해 MPA와 유사한 아키텍처로 SPA와 같은 라우팅을 가능하게 함. 
  - 무거운 연산, 로직, 라우팅 결정 권한은 MPA에서, 하지만 화면전환은 SPA에서, 
  - 상태 변경없이 서버 컴포넌트 트리와 클라이언트 사이트 트리를 병합하고 컴포넌트 확장 가능 
  
    

