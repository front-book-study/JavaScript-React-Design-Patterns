## 렌더링 패턴

### 랜더링 패턴의 중요성
- 주어진 상황에서 가장 적합한 렌더링 패턴을 선택하는 것은 개발 팀을 위한 DX + 최종 경험자를 위한 UX에 엄청난 차이를 만들 수 있음
- 뛰어난 UX를 위해서 핵심 웹 지표 (Core Web Vitals = CWV)를 기준으로 애플리케이션을 최적화해야 함.
  - TTFB (Time to First Byte) : 클라이언트가 페이지 콘텐츠의 첫 번째 바이트를 받는 데 걸리는 시간
  - FCP (First Contentful Paint) : 페이지 이동 후 브라우저가 콘텐츠의 첫 부분을 렌더링하는 데 걸리는 시간
  - TTI (Time to Interactive) : 페이지 로드 시작부터 사용자 입력에 빠르게 응답할 수 있을 때까지 걸리는 시간
  - LCP (Largest Contentful Paint) : 페이지의 주요 콘텐츠를 로드하고 렌더링하는 데 걸리는 시간
  - CLS (Cumulative Layout Shift) : 예상치 못한 레이아웃 변경을 방지하기 위한 시각적 안정성 측정
  - FID (First Input Delay) : 사용자가 페이지와 상호작용한 시점부터 이벤트 핸들러가 실행될 수 있는 시점까지의 시간
- DX를 제공하기 위해 필요한 최적화 작업
  - 빠른 빌드 시간
  - 낮은 서버 비용
  - 동적 콘텐츠
  - 쉬운 롤백
  - 안정적인 가동 시간
  - 확장 가능한 인프라

### CSR (Client Side Rendering)
- 대부분 로직이 클라이언트에서 실행
- 모든 UI가 클라이언트에서 생성
- 링크 클릭하여 탐색할 때 페이지 렌더링을 위한 새로운 요청 서버로 보내지 않음
  -> 클라이언트에서 코드 실행되어 뷰나 데이터를 갈아끼우는 형태
- 자바스크립트 코드의 복잡성 & 크기 증가 
  -> 큰 자바스크립트 번들 크기
  -> FCP, TTI 증가
- SEO 낮음

### SSR (Server Side Rendering)
- 모든 요청마다 HTML을 생성
- 데이터 연결 및 패칭 작업이 서버에서 처리
  -> 관련 요청 왕복 시간을 줄일 수 있음
- 자바스크립트 코드 줄어듦
- 클라이언트에서 하이드레이션하는 과정에서 필요한 자바스크립트 파일도 같이 내려줌.

### 정적 렌더링
- 순수 정적 렌더링 (SSG)
  -  빌드 시점에 미리 html을 생성. 
  - 자주 변경되지 않고 누구나 동일한 데이터를 보는 페이지에 적합
- 클라이언트 사이드 데이터 패칭을 통한 정적 렌더링
  - 기본 데이터는 정적으로 생성 (서버)
  - 동적 데이터는 동적으로 생성 (클라이언트)
- 점진적 정적 생성 (ISR)
  - SSR + SSG를 결합한 방식
  - 페이지 미리 정적 생성 & 사용자 요청 시 동적으로 업데이트
  - 정해진 시간마다 업데이트
  - 새로운 페이지 추가 허용
- On Demand ISR 
  - ISR과 달리 정해진 시간 간격이 아닌 특정 이벤트 발생 시에 페이지가 재생성
  - 엣지 네트워크 전체에 페이지를 다시 생성하고 재분배하므로 자동으로 전세계 사용자가 캐시된 오래된 콘텐츠가 아닌 최신 버전의 페이지 볼 수 있음
  - 불필요한 페이지 재생성, 서버리스 함수 호출을 피할 수 있음 -> 운영 비용 절감

### 스트리밍 SSR
- SSR과 달리 HTML 전체를 생성하는 것이 아니라 작은 조각 단위로 나눠서 전송
- TTI, FCP를 SSR보다 더 단축시킬 수 있음
  - 클라이언트는 데이터를 받는 동시에 UI 그리기 시작할 수 있음 -> 빠른 초기 로딩
- 네트워크 정제 현상에 효과적
  - 렌더러가 신호를 받아 네트워크 해소될 때까지 스트리밍 중단
  - 서버 메모리 덜 사용
  - I/O가 필요한 상황에 더욱 민첩하게 반응 가능
- react의 renderToNodeStream, renderToStaticNodeStream으로 구현 가능

### 엣지 SSR
- 사용자와 가까운 엣지(Edge) 환경에서 요청 시 HTML을 생성하는 SSR

### 하이브리드 렌더링
- 여러 가지 렌더링 방식을 결합
- 웹 개발에서 근본적인 변화!
- Next.js app router, Astro

